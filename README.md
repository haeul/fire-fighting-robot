( 화재진압로봇 ) 개발계획서
이름 : 이해울

1		개발 목표와 특징
□ 각 팀에서 개발하고자 하는 제안시스템의 특징을 반영한 개발목표를 기술
목표: 사람이 들어가기 힘든 화재 현장에 투입해 화재를 진압할 수 있는 로봇을 만드는 것.
특징: 낭떠러지, 장애물을 피하며 자율주행을 하다가 화재를 탐지하면 화재 방향으로 물을 뿌려 화재를 진압함.

2		개발 필요성 
□ 왜 본 시스템 개발이 필요한지 기술적 환경 및 수요 배경을 중심으로 기술
사람이 들어가기 힘든 위험한 화재 현장에 투입됐다가 다치거나 순직하는 
소방관이 많기 때문에 대신 들어가서 화재를 진압해줄 로봇이 개발되면 
안타까운 상황들을 막을 수 있기 때문에 필요하다고 생각합니다.

3		H/W 구현 
□ H/W를 어떻게 구현했는지를 그림, 사진 등으로 설명, 사용 센서, 부품들을 나열
수업시간에 만들어놨던 ABOT에 양면 테이프를 이용해 예전 키트에 있는 브레드보드를
붙이고 그 위에 Ir led와 Receiver를 연결하고 서보모터를 양면 테이프로 붙였습니다.
Ir led에는 2k 저항 대신 4.7k 저항을 연결해 조금 더 가까운 것을 감지하게 했습니다.
서보모터에는 박스를 잘라서 만든 판과 양면 테이프를 이용해 초음파센서와 
불꽃감지센서를 붙였습니다.
다이소에서 산 플라스틱 통에 모터드라이버를 붙이고 워터펌프모터를 넣어서
몸체에 양면 테이프로 붙였고 박스를 잘라 만든 발사대로 고무호스를 고정해줬습니다.

4		S/W 구현 
□ S/W를 어떻게 구현했는지를 설명
수업시간에 배운 적외선 센서를 이용한 낭떠러지 피하기 주행 코드를 베이스로
지난 학기에 배웠던 초음파센서, 불꽃감지센서, 서보모터를 활용해
전방 180도(센서 감지 범위 포함)를 탐지해 장애물을 회피하고 불꽃을 감지하게 
했습니다.
워터펌프모터는 모터드라이버와 함께 따로 구매해서 불꽃을 감지하면 물을 발사
하도록 했습니다.
과정을 처음부터 설명해보자면 정지 상태에서 서보모터를 돌려 전방 180도를
탐지하는데 이때 초음파 센서에 의해 왼쪽과 오른쪽에 감지되는 거리를 받고
불꽃감지센서로 화재가 감지되는지 입력 받습니다.
만약 불꽃이 감지되면 그 순간 서보모터의 회전각을 받아서 저장하고 몸체를 그 각만큼
회전시키는데 회전하는 기준이 되는 바퀴와 감지하는 센서가 달려있는 서보모터는
거리 차이가 있기 때문에 몸체를 회전시키기 전에 이 차이만큼 전진해줍니다.
이 과정을 구현하기 위해 서보모터와 두 바퀴중심을 연결한 선 사이의 길이를 측정했고
몸체를 90도 돌리는데 걸리는 시간을 측정해 90으로 나눠 1도 돌리는데 걸리는 시간을
구했습니다. 
그 결과 서보모터와 두 바퀴중심을 연결한 선 사이의 길이는 약 4.5cm 로 0.25초 
걸린다는 것을 알아냈고 90도 회전하는데 걸리는 시간은 0.54초, 1도 회전하는데 걸리는
시간은 0.006초 걸린다는 것을 알게 되었습니다.
제가 연결한 서보모터 방향에서는 받아온 회전각이 90도 이하면 오른쪽, 90도 이상이면 왼쪽에서 화재가 감지된 것이기 때문에 90도 이하일 때 오른쪽으로, 90도 이상일 때 
왼쪽으로 몸체를 회전하게 했고 우회전일 때는 (90-서보모터회전각)*(1도 회전시간)으로,
좌회전일 때는 (서보모터회전각-90)*(1도 회전시간)으로 감지한 각도만큼 몸체를 
회전시켰습니다.
그후 물을 발사하고 20cm 이내에 장애물이 감지됐을 때는 초음파로 탐지한 좌우 거리가 모두 10cm 미만일 때는 벽에 가로막혔다고 판단해 우회전으로 뒤로 돌아 빠져나가고 오른쪽 거리가 왼쪽 거리 이상일 때는 우회전, 반대의 경우 좌회전으로 장애물을 회피합니다.
주행중엔 낭떠러지 피하기 주행도 합니다.
위의 동작을 위해 물 발사 함수를 구글링해서 만들었고
변수 angle에 저장된 서보모터 회전각만큼 몸체를 회전시키는 함수인
spinTime(angle) 함수를 만들었고 초음파와 불꽃감지센서로 탐지하고 
화재를 진압하거나 장애물 회피 주행을 하는 detection() 함수를 만들었습니다.

5		향후 보완 사항 
□ 향후 보완이 필요하다고 생각되는 사항 기술
센서를 더 늘려서 탐지 범위를 늘려야하고 카메라와 라이트를 달아서 카메라를
통해 밖에서 상황을 볼 수 있게, 그리고 필요시에는 수동으로 조종할 수 있게 
하는 것도 좋을 것 같습니다.
또 워터펌프 쪽에도 모터를 달아 몸체가 직접 회전할 필요없이 호스를 회전시켜
원하는 방향에 물을 뿌릴 수 있게 하는게 좋겠습니다.



